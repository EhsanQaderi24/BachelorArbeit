<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Labor Anwendung</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="libs/quagga.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <header>
        <h1>Labor Anwendung</h1>
        <nav>
            <ul>
                <li><a href="#" id="navDashboard">Dashboard</a></li>
                <li><a href="#" id="navProcedures">Prozeduren</a></li>
                <li><a href="#" id="navHistory">Historie</a></li>
                <li><a href="#" id="logoutButton">Abmelden</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div id="notification" class="notification"></div>
        <section id="loginSection" class="section card">
            <h2><i class="fas fa-user"></i> Anmeldung</h2>
            <form id="loginForm">
                <label for="username"><i class="fas fa-user"></i> Benutzername:</label>
                <input type="text" id="username" name="username" class="input">
                <label for="password"><i class="fas fa-lock"></i> Passwort:</label>
                <input type="password" id="password" name="password" class="input">
                <button type="submit" class="button"><i class="fas fa-sign-in-alt"></i> Anmelden</button>
            </form>
            <p>Noch kein Konto? <a href="#" id="registerLink">Jetzt registrieren</a></p>
        </section>
        <section id="registerSection" class="section card" style="display: none;">
            <h2><i class="fas fa-user-plus"></i> Registrierung</h2>
            <form id="registerForm">
                <label for="registerUsername"><i class="fas fa-user"></i> Benutzername:</label>
                <input type="text" id="registerUsername" name="registerUsername" class="input">
                <label for="registerPassword"><i class="fas fa-lock"></i> Passwort:</label>
                <input type="password" id="registerPassword" name="registerPassword" class="input">
                <label for="registerRole"><i class="fas fa-user-tag"></i> Rolle:</label>
                <select id="registerRole" name="registerRole" class="input">
                    <option value="user">Benutzer</option>
                    <option value="admin">Administrator</option>
                </select>
                <button type="submit" class="button"><i class="fas fa-user-plus"></i> Registrieren</button>
            </form>
            <p>Schon ein Konto? <a href="#" id="showLoginForm">Jetzt anmelden</a></p>
        </section>
        <section id="dashboardSection" class="section card" style="display: none;">
            <h2>Willkommen, <span id="userWelcome"></span></h2>
            <div class="tools">
                <button id="startNewProcedure" class="button tool"><i class="fas fa-vial"></i> Neue Prozedur starten</button>
                <button id="continueProcedure" class="button tool"><i class="fas fa-play"></i> Prozedur fortsetzen</button>
                <button id="viewHistory" class="button tool"><i class="fas fa-history"></i> Prozedurhistorie anzeigen</button>
                <button id="exportProcedures" class="button tool"><i class="fas fa-file-export"></i> Prozeduren exportieren</button>
            </div>
            <div id="savedProcedures" class="section" style="display: none;">
                <h3><i class="fas fa-folder-open"></i> Gespeicherte Prozeduren</h3>
                <input type="text" id="searchProcedures" class="input" placeholder="Prozeduren suchen...">
                <ul id="procedureList" class="procedure-list"></ul>
                <button class="button" id="backToDashboard">Zurück</button>
            </div>
            <div id="procedureHistory" class="section" style="display: none;">
                <h3><i class="fas fa-history"></i> Prozedurhistorie</h3>
                <input type="text" id="searchHistory" class="input" placeholder="Prozedurenhistorie durchsuchen...">
                <ul id="historyList" class="history-list"></ul>
                <button class="button" id="backToDashboardFromHistory">Zurück</button>
            </div>
        </section>
        <section id="procedureSection" class="section card" style="display: none;">
            <h2>Prozedur: <span id="procedureTitle"></span></h2>
            <form id="procedureForm">
                <label for="activity"><i class="fas fa-tasks"></i> Labortätigkeit:</label>
                <input type="text" id="activity" name="activity" class="input">
                <label for="parameter"><i class="fas fa-sliders-h"></i> Parameter:</label>
                <input type="text" id="parameter" name="parameter" class="input">
                <button type="submit" class="button"><i class="fas fa-plus"></i> Eintragen</button>
            </form>
            <div class="actions">
                <button id="endProcedure" class="button"><i class="fas fa-check"></i> Prozedur abschließen</button>
                <button id="saveProcedure" class="button"><i class="fas fa-save"></i> Prozedur speichern</button>
                <button id="scanBarcode" class="button"><i class="fas fa-barcode"></i> Barcode scannen</button>
            </div>
            <div id="activityList" class="activity-list"></div>
            <button class="button" id="backToDashboardFromProcedure">Zurück</button>
        </section>
        <section id="scannerSection" class="section card" style="display: none;">
            <h2><i class="fas fa-barcode"></i> Barcode Scannen</h2>
            <div id="scanner-container" class="scanner-container"></div>
            <div class="actions">
                <button id="startScan" class="button"><i class="fas fa-play"></i> Start Scan</button>
                <button id="stopScan" class="button" style="display: none;"><i class="fas fa-stop"></i> Stop Scan</button>
            </div>
            <button class="button" id="backToProcedureFromScanner">Zurück</button>
        </section>
    </main>
    <script src="js/auth.js"></script>
    <script src="js/procedures.js"></script>
    <script src="js/barcode.js"></script>
    <script src="js/main.js"></script>
</body>
</html>

<section id="statisticsSection" class="section card" style="display: none;">
    <h2>Prozedurenstatistiken</h2>
    <canvas id="statisticsChart"></canvas>
    <button class="button" id="backToDashboardFromStatistics">Zurück</button>
</section>

<section id="adminSection" class="section card" style="display: none;">
    <h2>Admin-Dashboard</h2>
    <div class="tools">
        <button id="viewUsers" class="button tool"><i class="fas fa-users"></i> Benutzer anzeigen</button>
        <button id="viewProcedures" class="button tool"><i class="fas fa-vials"></i> Prozeduren anzeigen</button>
    </div>
    <div id="usersList" class="section" style="display: none;">
        <h3><i class="fas fa-users"></i> Benutzerliste</h3>
        <ul id="userList"></ul>
    </div>
    <div id="adminProcedures" class="section" style="display: none;">
        <h3><i class="fas fa-vials"></i> Prozedurenliste</h3>
        <ul id="adminProcedureList"></ul>
    </div>
    <button class="button" id="backToDashboardFromAdmin">Zurück</button>
</section>

<section id="sopSection" class="section card" style="display: none;">
    <h2>Verwaltung von SOPs</h2>
    <div class="tools">
        <button id="createSOP" class="button tool"><i class="fas fa-plus"></i> Neue SOP erstellen</button>
    </div>
    <div id="sopList" class="section">
        <h3><i class="fas fa-list"></i> SOP-Liste</h3>
        <ul id="sopListContainer"></ul>
    </div>
    <div id="createSOPForm" class="section" style="display: none;">
        <h3>Neue SOP erstellen</h3>
        <form id="sopForm">
            <label for="sopTitle"><i class="fas fa-heading"></i> SOP-Titel:</label>
            <input type="text" id="sopTitle" name="sopTitle" class="input">
            <label for="sopDescription"><i class="fas fa-info-circle"></i> SOP-Beschreibung:</label>
            <textarea id="sopDescription" name="sopDescription" class="input"></textarea>
            <button type="submit" class="button"><i class="fas fa-save"></i> SOP speichern</button>
        </form>
    </div>
    <button class="button" id="backToDashboardFromSOP">Zurück</button>
</section>

<section id="adminSection" class="section card" style="display: none;">
    <h2>Admin-Dashboard</h2>
    <div class="tools">
        <button id="viewUsers" class="button tool"><i class="fas fa-users"></i> Benutzer anzeigen</button>
        <button id="viewProcedures" class="button tool"><i class="fas fa-vials"></i> Prozeduren anzeigen</button>
    </div>
    <div id="usersList" class="section" style="display: none;">
        <h3><i class="fas fa-users"></i> Benutzerliste</h3>
        <ul id="userList"></ul>
    </div>
    <div id="adminProcedures" class="section" style="display: none;">
        <h3><i class="fas fa-vials"></i> Prozedurenliste</h3>
        <ul id="adminProcedureList"></ul>
    </div>
    <button class="button" id="backToDashboardFromAdmin">Zurück</button>
</section>
